\documentclass[a4paper,10pt]{article}
\usepackage{color}
\usepackage[utf8]{inputenc}


%Packages
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{color}
\usepackage{float}
\usepackage[utf8]{inputenc}

%Margins
\usepackage[
margin=2cm,
includefoot
]{geometry}


\title{Testing Document for PowerCloud}

\author{Illusion Solutions}

%Document start
\begin{document}
	
	%Title Page
	\newgeometry{top=4.5cm}
	\begin{titlepage}
		\begin{center}
			\line(1,0){300} \\
			[0.1cm]
			\textsc{\Huge
				PowerCloud\\
				Testing Document
			} \\
			\textsc{\large Final version}\\
			[0.1cm]
			\line(1,0){300} \\
			[2.0cm]
			\textsc{\Large
				Illusion Solutions
			} \\
			[3.5cm]
			
		\end{center}
		\begin{flushright}
			\textsc{\Large
				Stuart Andrews\\ 
				12153983\\
				Marc Antel\\
				12026973\\
				Mothusi Masibi\\
				12004589\\
				Brandon Wardley\\
				29005150\\
				[4.0cm]
			}
		\end{flushright}
		\begin{center}
			\today
		\end{center}
	\end{titlepage}
	
	\newpage
	\restoregeometry
	\tableofcontents
	\thispagestyle{empty}
	\newpage
	
	\section{Overview}

	\section{Introduction}
	PowerCloud is an IoT project intended to supply electrical usage data to large companies and 
	households. A PowerCloud device accurately measures the electrical consumption of rooms, offices and 
	large machinery in order to provide analytics, predictions and reduce costs associated with electricity 
	usage.
	
		\subsection{Purpose}
		This document provides unit test plans, results and a final report into one coherent document which can be used to analyse the current system status, this includes but is not limited to the test procedure, functional test cases, test results, conclusions and recommendations.
		
		\subsection{Scope}
		The scope of this document is structured as 
		follows. The features that are considered for
		testing are listed in section 3, tests that have 
		been identified from the requirements are
		discussed in detail in section 4.\\\\Furthermore, 
		this document outlines the test environment
		and the risks involved in the testing approaches 
		that will be followed. Assumptions and
		dependencies of this test plan will also be 
		mentioned.
		
		\subsection{Test Environment}
		\begin{itemize}
			\item \textbf{Programming Languages:}
				\begin{flushleft}
					\textit{
					• JAVA v1.8\\
					• C++\\
					• Javascript\\
					• HTML\\
					• LESS\\}
				\end{flushleft}
				
			\item\textbf{Testing Frameworks:}
				\begin{flushleft}
					\textit{• JUnit\\
					• Karma \& Jasmine\\
						}
				\end{flushleft}
				
			\item\textbf{Coding Environment:}
			\begin{flushleft}
				\textit{• Firmware: Atom + ParticleDev Plugin\\
					• Application Server: IntelliJ IDEA\\
					• Web Application: WebStorm\\}
			\end{flushleft}
			
			\item\textbf{Operating System:}
			\begin{flushleft}
				\textit{• KALI Linux x64 2016\\
					• Windows 10 x64}
			\end{flushleft}
			\item\textbf{Internet Browsers:}
			\begin{flushleft}
				\textit{• Chrome Browser for Windows x64\\
					• Chrome Browser for Debian x64}
			\end{flushleft}
		\end{itemize}
		
		\subsection{Assumptions \& Dependencies}
		The following dependencies are required to reproduce tests:
		\begin{itemize}
			\item \textbf{JUnit} Test Suite
			\item \textbf{GCC Compiler}
			\item \textbf{KarmaJS:} Installed globally via NPM
			\item \textbf{GulpJS:} Installed globally via NPM
			\item \textbf{Particle.io} Account
		\end{itemize}
		The following assumptions have been made:
		\begin{itemize}
			\item The user has constant internet access.
			\item The user's firewall is open to connections on port 1883, 9000, 8080, 80.
			\item The Application Server is hosted locally.	
		\end{itemize}
		
	\section{Functional Features to be tested.}
	The tests were implemented as follows for each of the components of the entire system. Each point represents an adequate test of the feature mentioned. \textbf{This section also outlines the item pass/fail criteria for each test.}
		\subsection{Firmware}
		\textbf{Store to EEPROM using a struct.}
		\begin{enumerate}
			\item Create the appropriate structure.
			\item Attempt to store said structure.
			\item Create an empty struct.
			\item Attempt to store an empty struct.
			\item Retrieve structs from EEPROM and verify that they are correct.
		\end{enumerate}
		\textbf{Store to EEPROM using raw values.}
		\begin{enumerate}
			\item Declare raw values which need to be stored.
			\item Attempt to store these acceptable values.
			\item Retrieve data from EEPROM and verify that it is correct. 
		\end{enumerate}
		\textbf{Retrieve from EEPROM.}
		\begin{enumerate}
			\item Create multiple struct objects.
			\item Store these struct objects to EEPROM.
			\item Attempt to retrieve stored objects.
			\item Verify that the objects are correct.
			\item Clear Memory.
			\item Attempt to retrieve objects again.
		\end{enumerate}
		
		\textbf{Check EEPROM for data.}
		\begin{enumerate}
			\item Calculate how many struct objects can be stored in EEPROM.
			\item Create enough struct objects to fill EEPROM to capacity.
			\item Call appropriate function to determine if the EEPROM is full.
			\item Create half the capacity of struct objects.
			\item Store these struct objects to EEPROM.
			\item Call appropriate function to determine if the EEPROM is full.
		\end{enumerate}
		\textbf{MQTT connect, which establishes a reliable connection to the server.}
		\begin{enumerate}
			\item Provide incorrect host IP.
			\item Attempt to connect.
			\item Provide correct host IP.
			\item Attempt to connect.
		\end{enumerate}
		\textbf{MQTT publish, which publishes JSON to the server.}
		\begin{enumerate}
			\item Ensure connection to server is established.
			\item Publish well-formed JSON.
			\item Publish malformed JSON.
			\item Ensure ACK packets are received on both occasions.
		\end{enumerate}
		
		\subsection{Application Server}
		
		\textbf{Concurrent MQTT Client Connections.}
		\begin{enumerate}
			\item Connect to server using Particle Photon.
			\item Connect to server using MQTT Lens plugin.
			\item Publish messages to server from photon and plugin concurrently.
			\item Evaluate Firebase to ensure data is stored correctly.
		\end{enumerate}
		\textbf{Validate Data from Client.}
		\begin{enumerate}
			\item Once a message has been received from a client.
			\item Extract payload from message.
			\item Parse JSON String into JSON object.
			\item Catch exception if necessary.
			\item Ensure JSON Object is accessible.
		\end{enumerate}
		\textbf{Store data to Firebase.}
		\begin{enumerate}
			\item Receive a continuous stream of messages from MQTT Clients.
			\item Attempt to store all messages to Firebase.
			\item Verify that all messages are present.
			\item Receive a continuous stream of messages with a 10 second delay.
			\item Attempt to store messages to Firebase.
			\item Verify that all messages are present.
		\end{enumerate}
	
		\subsubsection{Web Application}
		\textbf{User Login}
			\begin{enumerate}
				\item Test correct user credentials.
				\item Test incorrect login credentials.
				\item Verify API token exists after login.
				\item Verify API token deleted after logout.
			\end{enumerate}
		\textbf{User Register}
			\begin{enumerate}
				\item Test ideal user registration: Alphanumeric password 8+ characters long.
				Verify user email.
				\item Test non-ideal user registration: Simple password should fail registration.
				Emails with non-FQTLDs: "temp@co" should fail registration.
			\end{enumerate}
		\textbf{Retrieve initial dashboard data}
			\begin{enumerate}
				\item Verify Firebase object exists in controller.
				\item Verify correct promise received from Firebase.
				\item Retrieve all data from all devices.
				\item Calculated averages, totals and carbon footprint values are accurate.
			\end{enumerate}
		\textbf{Retrieve list of devices}
			\begin{enumerate}
				\item Verify Firebase object exists in controller.
				\item Verify correct promise received from Firebase.
				\item Retrieve all device meta details.
			\end{enumerate}
		\textbf{Retrieve device specific data}
			\begin{enumerate}
				\item Verify Firebase object exists in controller.
				\item Verify correct promise received from Firebase.
				\item Retrieve all data for device based on device ID.
			\end{enumerate}
		\textbf{Retrieve data from date range}
			\begin{enumerate}
				\item Verify Firebase object exists in controller.
				\item Verify correct promise received from Firebase.
				\item Retrieve all data for device based on device ID.
			\end{enumerate}
	
	\section{Other}
		\subsection{Test Incident Report}
		\subsubsection{Firmware}
		The following incidents occurred during firmware testing. Namely during:
		\textbf{Testing the connect and publish:}
		\begin{enumerate}
			\item Particle Photon disconnects from WiFi after concurrent publish events.
			\item Particle Photon does not continue publishing after disconnecting.
		\end{enumerate}
		\textbf{Testing the EEPROM}
		No incidents occurred with regards to testing the EEPROM.
		\subsubsection{Application Server}
		The following incidents occurred during application server testing. Namely during:
		\textbf{Storing to Firebase}
		\begin{enumerate}
			\item When receiving continuous messages from clients, some messages are not stored to Firebase.
		\end{enumerate}
	
	\section{Conclusions \& Recommendations}
	\subsection{Firmware}
	The current state of the Firmware is as follows.
	\textbf{\\The following tests have been implemented and assessed:}
	\begin{itemize}
		\item Attempt to publish a message without establishing a reliable connection to the server.
		\item Attempt to overflow variables.
		\item Attempt store incorrect datatypes.
		\item Test if EEPROM clears once full.
		\item Check data persists after device loses power.
		\item Criteria which would cause the device to disconnect or reboot.
	\end{itemize}
	
	\subsection{Application Server}
	The current state of the Application Server is as follows.
	\textbf{\\The following tests have been implemented and assessed:}
	\begin{itemize}
		\item Test whether messages received from clients contain the correct data.
		\item Attempt to store malformed JSON to Firebase.
		\item Test store methods using parametrized test.
		\item Test \textit{checkMonth()} with parametrized tests.
		\item Test \textit{validateID()} using parametrized tests.
		\item Test appropriate exceptions which are included within the exceptions package.
	\end{itemize}
	
	\textbf{The following tests need to be implemented and assessed:}
	\begin{itemize}
		\item Load testing with 50 simultaneous connections.
		\item Load testing with 100 simultaneous connections.
		\item Load testing with 1000 simultaneous connections.
	\end{itemize}
	
	\subsection{Web Application}
	The current state of the Web Application is as follows.
	\textbf{\\The following tests need to be implemented and assessed:}
	\begin{itemize}
		\item Load testing with 50 simultaneous connections.
		\item Load testing with 100 simultaneous connections.
		\item Load testing with 1000 simultaneous connections.
		\item Test load time for 1000 database entries.
		\item Test dashboard graphs with 1000 database entries.
	\end{itemize}
	
	As a whole, the system functions as expected using expected parameters and under the correct conditions.\\\\The next round of testing will attempt to put strain on the system through various load tests using load testing framework "Tsung".
	
\end{document}